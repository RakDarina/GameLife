<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-icon" href="icon.png">
    <title>GameLife</title>
    <style>
        :root { --blue: #007AFF; --bg: #F2F2F7; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, system-ui, sans-serif; margin: 0; background: var(--bg); color: #000; }
        
        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
        #app-viewport { padding: 20px; padding-bottom: 180px; min-height: 100vh; }

        /* –¢–∞–±-–±–∞—Ä */
        .tab-bar { position: fixed; bottom: 0; width: 100%; height: 85px; background: rgba(255,255,255,0.9); backdrop-filter: blur(20px); border-top: 0.5px solid #C6C6C8; display: flex; justify-content: space-around; padding-top: 10px; z-index: 1000; }
        .tab-item { text-align: center; color: #8E8E93; font-size: 10px; flex: 1; cursor: pointer; }
        .tab-item.active { color: var(--blue); }
        .tab-icon { font-size: 24px; display: block; margin-bottom: 4px; }
    </style>
</head>
<body>

    <div id="app-viewport">
        </div>

    <nav class="tab-bar">
        <div class="tab-item active" onclick="loadModule('./goals.js', this)"><span class="tab-icon">üéØ</span>–¶–µ–ª–∏</div>
        <div class="tab-item" onclick="loadModule('./mental.js', this)"><span class="tab-icon">üß†</span>–ú–µ–Ω—Ç–∞–ª–∫–∞</div>
        <div class="tab-item" onclick="loadModule('./lists.js', this)"><span class="tab-icon">üìö</span>–°–ø–∏—Å–∫–∏</div>
        <div class="tab-item" onclick="loadModule('./settings.js', this)"><span class="tab-icon">‚öôÔ∏è</span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
    </nav>

    <script type="module">
        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π
        window.loadModule = async function(path, el) {
            // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
            if (el) {
                document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
                el.classList.add('active');
            }

            try {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º JS —Ñ–∞–π–ª –∫–∞–∫ –º–æ–¥—É–ª—å
                const module = await import(path + '?v=' + Date.now());
                if (module.render) {
                    module.render(); // –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Ç—Ä–∏—Å–æ–≤–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                }
            } catch (err) {
                console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª—è:", err);
                document.getElementById('app-viewport').innerHTML = `<h1>–£–ø—Å!</h1><p>–§–∞–π–ª ${path} –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫—É.</p>`;
            }
        }

        // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≥—Ä—É–∑–∏–º —Ü–µ–ª–∏
        window.onload = () => loadModule('./goals.js');
    </script>
</body>
</html>
